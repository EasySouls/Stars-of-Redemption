{"ast":null,"code":"import _regeneratorRuntime from\"E:/stars-of-redemption/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"E:/stars-of-redemption/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"E:/stars-of-redemption/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"E:/stars-of-redemption/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useContext}from\"react\";import{CharacterContext,GameStateContext}from\"./App\";import AttributeUpgrade from\"./AttributeUpgrade\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var temporaryCharacter={name:\"\",level:0,hpMax:0,hp:0,encumbrence:0,encumbrenceMax:0,strength:10,dexterity:10,constitution:10,intelligence:10,wisdom:10,charisma:10,exp:0,expNext:0};export default function CharacterCreationScreen(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),error=_useState2[0],setError=_useState2[1];var _useState3=useState(\"typing\"),_useState4=_slicedToArray(_useState3,2),status=_useState4[0],setStatus=_useState4[1];// 'typing', 'submitting' or 'success'\nvar _useState5=useState(temporaryCharacter),_useState6=_slicedToArray(_useState5,2),tempChar=_useState6[0],setTempChar=_useState6[1];var _useState7=useState(14),_useState8=_slicedToArray(_useState7,2),points=_useState8[0],setPoints=_useState8[1];var _useContext=useContext(CharacterContext),character=_useContext.character,setCharacter=_useContext.setCharacter;var _useContext2=useContext(GameStateContext),setGameState=_useContext2.setGameState;function handleSubmit(_x){return _handleSubmit.apply(this,arguments);}function _handleSubmit(){_handleSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();setStatus(\"submitting\");_context.prev=2;_context.next=5;return submitForm(tempChar.name);case 5:setCharacter({name:tempChar.name,level:1,hpMax:10+tempChar.constitution*2,hp:10+tempChar.constitution*2,encumbrenceMax:10+tempChar.strength*5,encumbrence:character.encumbrenceMax,strength:tempChar.strength,dexterity:tempChar.dexterity,constitution:tempChar.constitution,intelligence:tempChar.intelligence,wisdom:tempChar.wisdom,charisma:tempChar.charisma,exp:0,expNext:100});setStatus(\"success\");_context.next=13;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](2);setStatus(\"typing\");setError(_context.t0);case 13:case\"end\":return _context.stop();}}},_callee,null,[[2,9]]);}));return _handleSubmit.apply(this,arguments);}function nextGameState(){setGameState(\"character-screen\");}function handleTextAreaChange(e){setTempChar(_objectSpread(_objectSpread({},tempChar),{},{name:e.target.value}));}function submitForm(name){return new Promise(function(resolve,reject){setTimeout(function(){var shouldError=name.toLowerCase()===\"\";//! List wrong answers\nif(shouldError){reject(new Error(\"You can't make a character with this name. Try again!\"));}else{resolve();}},1000);});}if(status!==\"success\"){return/*#__PURE__*/_jsxs(\"div\",{className:\"character-creation-screen\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Choose the name of your character:\"}),/*#__PURE__*/_jsx(\"input\",{value:tempChar.name,onChange:handleTextAreaChange,disabled:status===\"submitting\",placeholder:\"Something like Edward Kenway or Guts\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Remaining points: \",points]}),/*#__PURE__*/_jsx(AttributeUpgrade,{tempChar:tempChar,setTempChar:setTempChar,points:points,setPoints:setPoints}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmit,disabled:tempChar.name.length===0||status===\"submitting\"||points!==0,children:\"Create\"}),error!==null&&/*#__PURE__*/_jsx(\"p\",{className:\"create-character-error\",children:error.message})]});}else{return/*#__PURE__*/_jsxs(\"div\",{className:\"character-creation-screen\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Character created: \",character.name]}),/*#__PURE__*/_jsx(\"button\",{onClick:nextGameState,children:\"Continue\"})]});}}","map":{"version":3,"names":["React","useState","useContext","CharacterContext","GameStateContext","AttributeUpgrade","temporaryCharacter","name","level","hpMax","hp","encumbrence","encumbrenceMax","strength","dexterity","constitution","intelligence","wisdom","charisma","exp","expNext","CharacterCreationScreen","error","setError","status","setStatus","tempChar","setTempChar","points","setPoints","character","setCharacter","setGameState","handleSubmit","e","preventDefault","submitForm","nextGameState","handleTextAreaChange","target","value","Promise","resolve","reject","setTimeout","shouldError","toLowerCase","Error","length","message"],"sources":["E:/stars-of-redemption/src/components/CharacterCreationScreen.js"],"sourcesContent":["import React, { useState, useContext } from \"react\";\r\nimport { CharacterContext, GameStateContext } from \"./App\";\r\nimport AttributeUpgrade from \"./AttributeUpgrade\";\r\n\r\nconst temporaryCharacter = {\r\n  name: \"\",\r\n  level: 0,\r\n  hpMax: 0,\r\n  hp: 0,\r\n  encumbrence: 0,\r\n  encumbrenceMax: 0,\r\n  strength: 10,\r\n  dexterity: 10,\r\n  constitution: 10,\r\n  intelligence: 10,\r\n  wisdom: 10,\r\n  charisma: 10,\r\n  exp: 0,\r\n  expNext: 0,\r\n};\r\n\r\nexport default function CharacterCreationScreen() {\r\n  const [error, setError] = useState(null);\r\n  const [status, setStatus] = useState(\"typing\"); // 'typing', 'submitting' or 'success'\r\n  const [tempChar, setTempChar] = useState(temporaryCharacter);\r\n  const [points, setPoints] = useState(14);\r\n\r\n  const { character, setCharacter } = useContext(CharacterContext);\r\n  const { setGameState } = useContext(GameStateContext);\r\n\r\n  async function handleSubmit(e) {\r\n    e.preventDefault();\r\n    setStatus(\"submitting\");\r\n    try {\r\n      await submitForm(tempChar.name);\r\n      setCharacter({\r\n        name: tempChar.name,\r\n        level: 1,\r\n        hpMax: 10 + tempChar.constitution * 2,\r\n        hp: 10 + tempChar.constitution * 2,\r\n        encumbrenceMax: 10 + tempChar.strength * 5,\r\n        encumbrence: character.encumbrenceMax,\r\n        strength: tempChar.strength,\r\n        dexterity: tempChar.dexterity,\r\n        constitution: tempChar.constitution,\r\n        intelligence: tempChar.intelligence,\r\n        wisdom: tempChar.wisdom,\r\n        charisma: tempChar.charisma,\r\n        exp: 0,\r\n        expNext: 100,\r\n      });\r\n      setStatus(\"success\");\r\n    } catch (err) {\r\n      setStatus(\"typing\");\r\n      setError(err);\r\n    }\r\n  }\r\n\r\n  function nextGameState() {\r\n    setGameState(\"character-screen\");\r\n  }\r\n\r\n  function handleTextAreaChange(e) {\r\n    setTempChar({ ...tempChar, name: e.target.value });\r\n  }\r\n\r\n  function submitForm(name) {\r\n    return new Promise((resolve, reject) => {\r\n      setTimeout(() => {\r\n        let shouldError = name.toLowerCase() === \"\"; //! List wrong answers\r\n        if (shouldError) {\r\n          reject(\r\n            new Error(\"You can't make a character with this name. Try again!\")\r\n          );\r\n        } else {\r\n          resolve();\r\n        }\r\n      }, 1000);\r\n    });\r\n  }\r\n\r\n  if (status !== \"success\") {\r\n    return (\r\n      <div className='character-creation-screen'>\r\n        <h2>Choose the name of your character:</h2>\r\n        <input\r\n          value={tempChar.name}\r\n          onChange={handleTextAreaChange}\r\n          disabled={status === \"submitting\"}\r\n          placeholder='Something like Edward Kenway or Guts'\r\n        />\r\n        <p>Remaining points: {points}</p>\r\n        <AttributeUpgrade\r\n          tempChar={tempChar}\r\n          setTempChar={setTempChar}\r\n          points={points}\r\n          setPoints={setPoints}\r\n        />\r\n        <button\r\n          onClick={handleSubmit}\r\n          disabled={\r\n            tempChar.name.length === 0 ||\r\n            status === \"submitting\" ||\r\n            points !== 0\r\n          }\r\n        >\r\n          Create\r\n        </button>\r\n        {error !== null && (\r\n          <p className='create-character-error'>{error.message}</p>\r\n        )}\r\n      </div>\r\n    );\r\n  } else {\r\n    return (\r\n      <div className='character-creation-screen'>\r\n        <p>Character created: {character.name}</p>\r\n        <button onClick={nextGameState}>Continue</button>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n"],"mappings":"+bAAA,MAAOA,MAAK,EAAIC,QAAQ,CAAEC,UAAU,KAAQ,OAAO,CACnD,OAASC,gBAAgB,CAAEC,gBAAgB,KAAQ,OAAO,CAC1D,MAAOC,iBAAgB,KAAM,oBAAoB,CAAC,wFAElD,GAAMC,mBAAkB,CAAG,CACzBC,IAAI,CAAE,EAAE,CACRC,KAAK,CAAE,CAAC,CACRC,KAAK,CAAE,CAAC,CACRC,EAAE,CAAE,CAAC,CACLC,WAAW,CAAE,CAAC,CACdC,cAAc,CAAE,CAAC,CACjBC,QAAQ,CAAE,EAAE,CACZC,SAAS,CAAE,EAAE,CACbC,YAAY,CAAE,EAAE,CAChBC,YAAY,CAAE,EAAE,CAChBC,MAAM,CAAE,EAAE,CACVC,QAAQ,CAAE,EAAE,CACZC,GAAG,CAAE,CAAC,CACNC,OAAO,CAAE,CACX,CAAC,CAED,cAAe,SAASC,wBAAuB,EAAG,CAChD,cAA0BpB,QAAQ,CAAC,IAAI,CAAC,wCAAjCqB,KAAK,eAAEC,QAAQ,eACtB,eAA4BtB,QAAQ,CAAC,QAAQ,CAAC,yCAAvCuB,MAAM,eAAEC,SAAS,eAAwB;AAChD,eAAgCxB,QAAQ,CAACK,kBAAkB,CAAC,yCAArDoB,QAAQ,eAAEC,WAAW,eAC5B,eAA4B1B,QAAQ,CAAC,EAAE,CAAC,yCAAjC2B,MAAM,eAAEC,SAAS,eAExB,gBAAoC3B,UAAU,CAACC,gBAAgB,CAAC,CAAxD2B,SAAS,aAATA,SAAS,CAAEC,YAAY,aAAZA,YAAY,CAC/B,iBAAyB7B,UAAU,CAACE,gBAAgB,CAAC,CAA7C4B,YAAY,cAAZA,YAAY,CAAkC,QAEvCC,aAAY,kJAA3B,iBAA4BC,CAAC,oHAC3BA,CAAC,CAACC,cAAc,EAAE,CAClBV,SAAS,CAAC,YAAY,CAAC,CAAC,sCAEhBW,WAAU,CAACV,QAAQ,CAACnB,IAAI,CAAC,QAC/BwB,YAAY,CAAC,CACXxB,IAAI,CAAEmB,QAAQ,CAACnB,IAAI,CACnBC,KAAK,CAAE,CAAC,CACRC,KAAK,CAAE,EAAE,CAAGiB,QAAQ,CAACX,YAAY,CAAG,CAAC,CACrCL,EAAE,CAAE,EAAE,CAAGgB,QAAQ,CAACX,YAAY,CAAG,CAAC,CAClCH,cAAc,CAAE,EAAE,CAAGc,QAAQ,CAACb,QAAQ,CAAG,CAAC,CAC1CF,WAAW,CAAEmB,SAAS,CAAClB,cAAc,CACrCC,QAAQ,CAAEa,QAAQ,CAACb,QAAQ,CAC3BC,SAAS,CAAEY,QAAQ,CAACZ,SAAS,CAC7BC,YAAY,CAAEW,QAAQ,CAACX,YAAY,CACnCC,YAAY,CAAEU,QAAQ,CAACV,YAAY,CACnCC,MAAM,CAAES,QAAQ,CAACT,MAAM,CACvBC,QAAQ,CAAEQ,QAAQ,CAACR,QAAQ,CAC3BC,GAAG,CAAE,CAAC,CACNC,OAAO,CAAE,GACX,CAAC,CAAC,CACFK,SAAS,CAAC,SAAS,CAAC,CAAC,+EAErBA,SAAS,CAAC,QAAQ,CAAC,CACnBF,QAAQ,aAAK,CAAC,oEAEjB,+CAED,QAASc,cAAa,EAAG,CACvBL,YAAY,CAAC,kBAAkB,CAAC,CAClC,CAEA,QAASM,qBAAoB,CAACJ,CAAC,CAAE,CAC/BP,WAAW,gCAAMD,QAAQ,MAAEnB,IAAI,CAAE2B,CAAC,CAACK,MAAM,CAACC,KAAK,GAAG,CACpD,CAEA,QAASJ,WAAU,CAAC7B,IAAI,CAAE,CACxB,MAAO,IAAIkC,QAAO,CAAC,SAACC,OAAO,CAAEC,MAAM,CAAK,CACtCC,UAAU,CAAC,UAAM,CACf,GAAIC,YAAW,CAAGtC,IAAI,CAACuC,WAAW,EAAE,GAAK,EAAE,CAAE;AAC7C,GAAID,WAAW,CAAE,CACfF,MAAM,CACJ,GAAII,MAAK,CAAC,uDAAuD,CAAC,CACnE,CACH,CAAC,IAAM,CACLL,OAAO,EAAE,CACX,CACF,CAAC,CAAE,IAAI,CAAC,CACV,CAAC,CAAC,CACJ,CAEA,GAAIlB,MAAM,GAAK,SAAS,CAAE,CACxB,mBACE,aAAK,SAAS,CAAC,2BAA2B,wBACxC,0DAA2C,cAC3C,cACE,KAAK,CAAEE,QAAQ,CAACnB,IAAK,CACrB,QAAQ,CAAE+B,oBAAqB,CAC/B,QAAQ,CAAEd,MAAM,GAAK,YAAa,CAClC,WAAW,CAAC,sCAAsC,EAClD,cACF,0CAAsBI,MAAM,GAAK,cACjC,KAAC,gBAAgB,EACf,QAAQ,CAAEF,QAAS,CACnB,WAAW,CAAEC,WAAY,CACzB,MAAM,CAAEC,MAAO,CACf,SAAS,CAAEC,SAAU,EACrB,cACF,eACE,OAAO,CAAEI,YAAa,CACtB,QAAQ,CACNP,QAAQ,CAACnB,IAAI,CAACyC,MAAM,GAAK,CAAC,EAC1BxB,MAAM,GAAK,YAAY,EACvBI,MAAM,GAAK,CACZ,oBAGM,CACRN,KAAK,GAAK,IAAI,eACb,UAAG,SAAS,CAAC,wBAAwB,UAAEA,KAAK,CAAC2B,OAAO,EACrD,GACG,CAEV,CAAC,IAAM,CACL,mBACE,aAAK,SAAS,CAAC,2BAA2B,wBACxC,2CAAuBnB,SAAS,CAACvB,IAAI,GAAK,cAC1C,eAAQ,OAAO,CAAE8B,aAAc,sBAAkB,GAC7C,CAEV,CACF"},"metadata":{},"sourceType":"module","externalDependencies":[]}