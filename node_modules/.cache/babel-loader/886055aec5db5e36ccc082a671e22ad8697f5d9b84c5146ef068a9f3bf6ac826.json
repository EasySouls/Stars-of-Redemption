{"ast":null,"code":"import _regeneratorRuntime from\"E:/stars-of-redemption/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"E:/stars-of-redemption/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"E:/stars-of-redemption/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useRef,useState}from\"react\";import{useAuth}from\"../contexts/AuthContext\";import{Link,useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Signup(){var emailRef=useRef();var passwordRef=useRef();var passwordConfirmRef=useRef();var _useAuth=useAuth(),signup=_useAuth.signup;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),error=_useState2[0],setError=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var navigate=useNavigate();function handleSubmit(_x){return _handleSubmit.apply(this,arguments);}function _handleSubmit(){_handleSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();if(!(passwordRef.current.value!==passwordConfirmRef.current.value)){_context.next=3;break;}return _context.abrupt(\"return\",setError(\"Passwords do not match!\"));case 3:_context.prev=3;setError(\"\");setLoading(true);_context.next=8;return signup(emailRef.current.value,passwordRef.current.value);case 8:navigate(\"/stars-of-redemption\");_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](3);setError(\"Failed to create an account\");case 14:setLoading(false);case 15:case\"end\":return _context.stop();}}},_callee,null,[[3,11]]);}));return _handleSubmit.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"div\",{className:\"sign-up\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Sign Up\"}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"sign-up-error\",children:/*#__PURE__*/_jsx(\"h2\",{children:error})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"label\",{children:\"Email:\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",ref:emailRef,required:true}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"label\",{children:\"Password\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",ref:passwordRef,required:true}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"label\",{children:\"Password confirmation\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",ref:passwordConfirmRef,required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,children:\"Sign Up\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Already have an account?\",/*#__PURE__*/_jsx(Link,{to:\"/stars-of-redemption/login\",children:\"Login\"})]})]});}","map":{"version":3,"names":["React","useRef","useState","useAuth","Link","useNavigate","Signup","emailRef","passwordRef","passwordConfirmRef","signup","error","setError","loading","setLoading","navigate","handleSubmit","e","preventDefault","current","value"],"sources":["E:/stars-of-redemption/src/components/Signup.js"],"sourcesContent":["import React, { useRef, useState } from \"react\";\r\nimport { useAuth } from \"../contexts/AuthContext\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\n\r\nexport default function Signup() {\r\n  const emailRef = useRef();\r\n  const passwordRef = useRef();\r\n  const passwordConfirmRef = useRef();\r\n\r\n  const { signup } = useAuth();\r\n\r\n  const [error, setError] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n  const navigate = useNavigate();\r\n\r\n  async function handleSubmit(e) {\r\n    e.preventDefault();\r\n\r\n    if (passwordRef.current.value !== passwordConfirmRef.current.value) {\r\n      return setError(\"Passwords do not match!\");\r\n    }\r\n\r\n    try {\r\n      setError(\"\");\r\n      setLoading(true);\r\n      await signup(emailRef.current.value, passwordRef.current.value);\r\n      navigate(\"/stars-of-redemption\");\r\n    } catch {\r\n      setError(\"Failed to create an account\");\r\n    }\r\n\r\n    setLoading(false);\r\n  }\r\n\r\n  return (\r\n    <div className='sign-up'>\r\n      <h1>Sign Up</h1>\r\n      {error && (\r\n        <div className='sign-up-error'>\r\n          <h2>{error}</h2>\r\n        </div>\r\n      )}\r\n      <form onSubmit={handleSubmit}>\r\n        <label>Email:</label>\r\n        <br />\r\n        <input type='email' ref={emailRef} required />\r\n        <br />\r\n        <label>Password</label>\r\n        <br />\r\n        <input type='password' ref={passwordRef} required />\r\n        <br />\r\n        <label>Password confirmation</label>\r\n        <br />\r\n        <input type='password' ref={passwordConfirmRef} required />\r\n        <button type='submit' disabled={loading}>\r\n          Sign Up\r\n        </button>\r\n      </form>\r\n      <div>\r\n        Already have an account?\r\n        <Link to='/stars-of-redemption/login'>Login</Link>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"oVAAA,MAAOA,MAAK,EAAIC,MAAM,CAAEC,QAAQ,KAAQ,OAAO,CAC/C,OAASC,OAAO,KAAQ,yBAAyB,CACjD,OAASC,IAAI,CAAEC,WAAW,KAAQ,kBAAkB,CAAC,wFAErD,cAAe,SAASC,OAAM,EAAG,CAC/B,GAAMC,SAAQ,CAAGN,MAAM,EAAE,CACzB,GAAMO,YAAW,CAAGP,MAAM,EAAE,CAC5B,GAAMQ,mBAAkB,CAAGR,MAAM,EAAE,CAEnC,aAAmBE,OAAO,EAAE,CAApBO,MAAM,UAANA,MAAM,CAEd,cAA0BR,QAAQ,CAAC,EAAE,CAAC,wCAA/BS,KAAK,eAAEC,QAAQ,eACtB,eAA8BV,QAAQ,CAAC,KAAK,CAAC,yCAAtCW,OAAO,eAAEC,UAAU,eAC1B,GAAMC,SAAQ,CAAGV,WAAW,EAAE,CAAC,QAEhBW,aAAY,kJAA3B,iBAA4BC,CAAC,oHAC3BA,CAAC,CAACC,cAAc,EAAE,CAAC,KAEfV,WAAW,CAACW,OAAO,CAACC,KAAK,GAAKX,kBAAkB,CAACU,OAAO,CAACC,KAAK,0DACzDR,QAAQ,CAAC,yBAAyB,CAAC,yBAI1CA,QAAQ,CAAC,EAAE,CAAC,CACZE,UAAU,CAAC,IAAI,CAAC,CAAC,sBACXJ,OAAM,CAACH,QAAQ,CAACY,OAAO,CAACC,KAAK,CAAEZ,WAAW,CAACW,OAAO,CAACC,KAAK,CAAC,QAC/DL,QAAQ,CAAC,sBAAsB,CAAC,CAAC,iFAEjCH,QAAQ,CAAC,6BAA6B,CAAC,CAAC,QAG1CE,UAAU,CAAC,KAAK,CAAC,CAAC,qEACnB,+CAED,mBACE,aAAK,SAAS,CAAC,SAAS,wBACtB,+BAAgB,CACfH,KAAK,eACJ,YAAK,SAAS,CAAC,eAAe,uBAC5B,oBAAKA,KAAK,EAAM,EAEnB,cACD,cAAM,QAAQ,CAAEK,YAAa,wBAC3B,iCAAqB,cACrB,aAAM,cACN,cAAO,IAAI,CAAC,OAAO,CAAC,GAAG,CAAET,QAAS,CAAC,QAAQ,OAAG,cAC9C,aAAM,cACN,mCAAuB,cACvB,aAAM,cACN,cAAO,IAAI,CAAC,UAAU,CAAC,GAAG,CAAEC,WAAY,CAAC,QAAQ,OAAG,cACpD,aAAM,cACN,gDAAoC,cACpC,aAAM,cACN,cAAO,IAAI,CAAC,UAAU,CAAC,GAAG,CAAEC,kBAAmB,CAAC,QAAQ,OAAG,cAC3D,eAAQ,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAEI,OAAQ,qBAE/B,GACJ,cACP,+DAEE,KAAC,IAAI,EAAC,EAAE,CAAC,4BAA4B,mBAAa,GAC9C,GACF,CAEV"},"metadata":{},"sourceType":"module","externalDependencies":[]}