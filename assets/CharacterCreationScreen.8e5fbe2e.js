import{j as a,a as e,r as c,u as N,C as j,G,b as g,c as E,s as A,d as D}from"./index.efeed2a6.js";function l({children:t,handleUpgrade:i,attribute:n}){return a("div",{children:[e("span",{className:"flex flex-col w-12 h-10 lg:w-24 lg:h-20 bg-red-800 border border-secondary-900 dark:border-white rounded justify-center text-[.5rem] lg:text-sm ",children:t}),e("button",{className:"cursor-pointer my-2 mx-1 p-1 border border-black dark:border-white rounded-md hover:bg-primary-300 focus:border-primary-600 text-center w-5 h-5 lg:w-7 lg:h-7 text-xs lg:text-base",onClick:()=>i(!0,n),children:"+1"}),e("button",{className:"cursor-pointer my-2 mx-1 p-1 border border-black dark:border-white rounded-md hover:bg-primary-300 focus:border-primary-600 text-center w-5 h-5 lg:w-7 lg:h-7 text-xs lg:text-base",onClick:()=>i(!1,n),children:"-1"})]})}function R({tempChar:t,setTempChar:i,points:n,setPoints:d}){function r(h,s){!h&&t[s]>0?(d(++n),i(o=>({...o,[s]:o[s]-1}))):h&&n>0&&t[s]<20&&(d(--n),i(o=>({...o,[s]:o[s]+1})))}return a("div",{className:"mt-8 flex flex-row justify-evenly text-center",children:[a(l,{handleUpgrade:r,attribute:"strength",children:[e("p",{children:"Strength"}),t.strength]}),a(l,{handleUpgrade:r,attribute:"dexterity",children:[e("p",{children:"Dexterity"}),t.dexterity]}),a(l,{handleUpgrade:r,attribute:"constitution",children:[e("p",{children:"Constitution"}),t.constitution]}),a(l,{handleUpgrade:r,attribute:"intelligence",children:[e("p",{children:"Intelligence"}),t.intelligence]}),a(l,{handleUpgrade:r,attribute:"wisdom",children:[e("p",{children:"Wisdom"}),t.wisdom]}),a(l,{handleUpgrade:r,attribute:"charisma",children:[e("p",{children:"Charisma"}),t.charisma]})]})}function T(){const[t,i]=c.exports.useState(null),[n,d]=c.exports.useState("typing"),[r,h]=c.exports.useState(U),[s,o]=c.exports.useState(14),m=c.exports.useRef("name"),{currentUser:x}=N(),{character:b,setCharacter:y}=c.exports.useContext(j),{setGameState:f}=c.exports.useContext(G);async function w(p){p.preventDefault(),d("submitting");try{console.log(m.current.value),await C(m.current.value);const u=new g(m.current.value,1,0,0,r.strength,r.dexterity,r.constitution,r.intelligence,r.wisdom,r.charisma,0,[...E],!0);await y(u),d("success")}catch(u){d("typing"),i(u)}}function k(){f("adventure"),A(x,b),D(x,b)}function C(p){return new Promise((u,v)=>{setTimeout(()=>{let S=p.toLowerCase()==="";//! List wrong answers
S?v(new Error("You can't make a character with this name. Try again!")):u()},500)})}return n!=="success"?a("div",{children:[e("h2",{children:"Choose the name of your character:"}),e("input",{className:"w-80 text-black placeholder:italic p-1 placeholder:text-slate-400 border border-primary-dark dark:border-primary rounded-md sm:text-sm outline-none",ref:m,disabled:n==="submitting",placeholder:"Something like Edward Kenway or Guts"}),a("p",{className:"mt-4",children:["Remaining points: ",s]}),e(R,{tempChar:r,setTempChar:h,points:s,setPoints:o}),e("button",{className:"border p-1 cursor-pointer border-black dark:border-white rounded-md enabled:hover:bg-primary-300 focus:border-primary-600 disabled:text-gray-400 disabled:border-gray-400",onClick:w,disabled:n==="submitting"||s!==0,children:"Create"}),t!==null&&e("p",{className:"border-1 md:border-2 border-primary-dark",children:t.message})]}):a("div",{children:[a("p",{children:["Character created:"," ",e("span",{className:"font-semibold",children:b.name})]}),e("button",{className:"p-1 mt-2 border border-black dark:border-white rounded-md hover:bg-primary-300 focus:border-primary-600 text-center",onClick:k,children:"Continue"})]})}const U=new g("",1,0,0,10,10,10,10,10,10,!0);export{T as default};
